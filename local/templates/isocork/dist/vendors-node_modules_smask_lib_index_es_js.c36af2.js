"use strict";
(self["webpackChunkwebpack"] = self["webpackChunkwebpack"] || []).push([["vendors-node_modules_smask_lib_index_es_js"],{

/***/ "./node_modules/smask/lib/index.es.js":
/*!********************************************!*\
  !*** ./node_modules/smask/lib/index.es.js ***!
  \********************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   currencyFormat: function() { return /* binding */ currencyFormat; },
/* harmony export */   currencyUnformat: function() { return /* binding */ currencyUnformat; },
/* harmony export */   date: function() { return /* binding */ date; },
/* harmony export */   dateTimeFormat: function() { return /* binding */ dateTimeFormat; },
/* harmony export */   getComputedDate: function() { return /* binding */ getComputedDate; },
/* harmony export */   getDatePattern: function() { return /* binding */ getDatePattern; },
/* harmony export */   input: function() { return /* binding */ input; },
/* harmony export */   inputCurrency: function() { return /* binding */ inputCurrency; },
/* harmony export */   inputDate: function() { return /* binding */ inputDate; },
/* harmony export */   inputNumber: function() { return /* binding */ inputNumber; },
/* harmony export */   isValidDate: function() { return /* binding */ isValidDate; },
/* harmony export */   localeDate: function() { return /* binding */ localeDate; },
/* harmony export */   localeDateTime: function() { return /* binding */ localeDateTime; },
/* harmony export */   localeTime: function() { return /* binding */ localeTime; },
/* harmony export */   mask: function() { return /* binding */ mask; },
/* harmony export */   numberFormat: function() { return /* binding */ numberFormat; },
/* harmony export */   numberUnformat: function() { return /* binding */ numberUnformat; },
/* harmony export */   prepareMaskInputs: function() { return /* binding */ prepareMaskInputs; },
/* harmony export */   unmask: function() { return /* binding */ unmask; },
/* harmony export */   unmaskDate: function() { return /* binding */ unmaskDate; },
/* harmony export */   unmaskNumber: function() { return /* binding */ unmaskNumber; }
/* harmony export */ });
const numberFormat = (value, locale = navigator.language, style = "decimal", options) => {
  options = { style, ...options };
  return new Intl.NumberFormat(locale, options).format(value);
};
const currencyLocale = {
  AD: "EUR",
  AE: "AED",
  AF: "AFN",
  AG: "XCD",
  AI: "XCD",
  AL: "ALL",
  AM: "AMD",
  AO: "AOA",
  AR: "ARS",
  AS: "USD",
  AT: "EUR",
  AU: "AUD",
  AW: "AWG",
  AX: "EUR",
  AZ: "AZN",
  BA: "BAM",
  BB: "BBD",
  BD: "BDT",
  BE: "EUR",
  BF: "XOF",
  BG: "BGN",
  BH: "BHD",
  BI: "BIF",
  BJ: "XOF",
  BL: "EUR",
  BM: "BMD",
  BN: "BND",
  BO: "BOB",
  BQ: "USD",
  BR: "BRL",
  BS: "BSD",
  BT: "BTN",
  BV: "NOK",
  BW: "BWP",
  BY: "BYN",
  BZ: "BZD",
  CA: "CAD",
  CC: "AUD",
  CD: "CDF",
  CF: "XAF",
  CG: "XAF",
  CH: "CHF",
  CI: "XOF",
  CK: "NZD",
  CL: "CLP",
  CM: "XAF",
  CN: "CNY",
  CO: "COP",
  CR: "CRC",
  CU: "CUP",
  CV: "CVE",
  CW: "ANG",
  CX: "AUD",
  CY: "EUR",
  CZ: "CZK",
  DE: "EUR",
  DJ: "DJF",
  DK: "DKK",
  DM: "XCD",
  DO: "DOP",
  DZ: "DZD",
  EC: "USD",
  EE: "EUR",
  EG: "EGP",
  EH: "MAD",
  ER: "ERN",
  ES: "EUR",
  ET: "ETB",
  FI: "EUR",
  FJ: "FJD",
  FK: "FKP",
  FM: "USD",
  FO: "DKK",
  FR: "EUR",
  GA: "XAF",
  GB: "GBP",
  GD: "XCD",
  GE: "GEL",
  GF: "EUR",
  GG: "GBP",
  GH: "GHS",
  GI: "GIP",
  GL: "DKK",
  GM: "GMD",
  GN: "GNF",
  GP: "EUR",
  GQ: "XAF",
  GR: "EUR",
  GS: "GBP",
  GT: "GTQ",
  GU: "USD",
  GW: "XOF",
  GY: "GYD",
  HK: "HKD",
  HM: "AUD",
  HN: "HNL",
  HR: "HRK",
  HT: "HTG",
  HU: "HUF",
  ID: "IDR",
  IE: "EUR",
  IL: "ILS",
  IM: "GBP",
  IN: "INR",
  IO: "USD",
  IQ: "IQD",
  IR: "IRR",
  IS: "ISK",
  IT: "EUR",
  JE: "GBP",
  JM: "JMD",
  JO: "JOD",
  JP: "JPY",
  KE: "KES",
  KG: "KGS",
  KH: "KHR",
  KI: "AUD",
  KM: "KMF",
  KN: "XCD",
  KP: "KPW",
  KR: "KRW",
  KW: "KWD",
  KY: "KYD",
  KZ: "KZT",
  LA: "LAK",
  LB: "LBP",
  LC: "XCD",
  LI: "CHF",
  LK: "LKR",
  LR: "LRD",
  LS: "LSL",
  LT: "EUR",
  LU: "EUR",
  LV: "EUR",
  LY: "LYD",
  MA: "MAD",
  MC: "EUR",
  MD: "MDL",
  ME: "EUR",
  MF: "EUR",
  MG: "MGA",
  MH: "USD",
  MK: "MKD",
  ML: "XOF",
  MM: "MMK",
  MN: "MNT",
  MO: "MOP",
  MP: "USD",
  MQ: "EUR",
  MR: "MRO",
  MS: "XCD",
  MT: "EUR",
  MU: "MUR",
  MV: "MVR",
  MW: "MWK",
  MX: "MXN",
  MY: "MYR",
  MZ: "MZN",
  NA: "NAD",
  NC: "XPF",
  NE: "XOF",
  NF: "AUD",
  NG: "NGN",
  NI: "NIO",
  NL: "EUR",
  NO: "NOK",
  NP: "NPR",
  NR: "AUD",
  NU: "NZD",
  NZ: "NZD",
  OM: "OMR",
  PA: "PAB",
  PE: "PEN",
  PF: "XPF",
  PG: "PGK",
  PH: "PHP",
  PK: "PKR",
  PL: "PLN",
  PM: "EUR",
  PN: "NZD",
  PR: "USD",
  PS: "ILS",
  PT: "EUR",
  PW: "USD",
  PY: "PYG",
  QA: "QAR",
  RE: "EUR",
  RO: "RON",
  RS: "RSD",
  RU: "RUB",
  RW: "RWF",
  SA: "SAR",
  SB: "SBD",
  SC: "SCR",
  SD: "SDG",
  SE: "SEK",
  SG: "SGD",
  SH: "SHP",
  SI: "EUR",
  SJ: "NOK",
  SK: "EUR",
  SL: "SLL",
  SM: "EUR",
  SN: "XOF",
  SO: "SOS",
  SR: "SRD",
  ST: "STD",
  SV: "SVC",
  SX: "ANG",
  SY: "SYP",
  SZ: "SZL",
  TC: "USD",
  TD: "XAF",
  TF: "EUR",
  TG: "XOF",
  TH: "THB",
  TJ: "TJS",
  TK: "NZD",
  TL: "USD",
  TM: "TMT",
  TN: "TND",
  TO: "TOP",
  TR: "TRY",
  TT: "TTD",
  TV: "AUD",
  TW: "TWD",
  TZ: "TZS",
  UA: "UAH",
  UG: "UGX",
  UM: "USD",
  US: "USD",
  UY: "UYU",
  UZ: "UZS",
  VA: "EUR",
  VC: "XCD",
  VE: "VEF",
  VG: "USD",
  VI: "USD",
  VN: "VND",
  VU: "VUV",
  WF: "XPF",
  WS: "WST",
  YE: "YER",
  YT: "EUR",
  ZA: "ZAR",
  ZM: "ZMW",
  ZW: "ZWL"
};
const currencyFormat = (value, locale = navigator.language, currency = currencyLocale[locale.slice(-2)]) => {
  return numberFormat(value, locale, "currency", { currency });
};
const referenceDateDigits = "01/01/1970".replace(/\D/g, "");
const getComputedDate = (value) => {
  const valueDigits = value.replace(/\D/g, "");
  const computedDate = valueDigits + referenceDateDigits.slice(valueDigits.length);
  return computedDate;
};
const getDateParts = (locales) => {
  return new Intl.DateTimeFormat(locales).formatToParts();
};
const isValidDate = (date2) => {
  return date2 instanceof Date && !isNaN(date2.valueOf());
};
const getDatePattern = (locale) => {
  let pattern = "";
  const dateParts = getDateParts(locale);
  dateParts.forEach(({ type, value }) => {
    if (type === "month" || type === "day")
      pattern += "dd";
    else if (type === "year")
      pattern += "dddd";
    else if (type === "literal")
      pattern += value;
  });
  return pattern;
};
const date = (date2, locale) => {
  var _a;
  const dateParts = getDateParts(locale);
  const splitChar = (_a = dateParts.find(({ type }) => type === "literal")) == null ? void 0 : _a.value;
  const dateArray = date2.split(splitChar);
  const { month, day, year } = {
    [dateParts[0].type]: dateArray[0],
    [dateParts[2].type]: dateArray[1],
    [dateParts[4].type]: dateArray[2]
  };
  const dateFormat = `${month}/${day}/${year}`;
  return new Date(dateFormat);
};
const dateTimeFormat = (value, locale = navigator.language, options) => {
  return new Intl.DateTimeFormat(locale, options).format(value);
};
const localeDateTime = (value, locale = navigator.language, options) => {
  if (!value)
    return value;
  const date2 = new Date(value);
  if (!isValidDate(date2))
    return value;
  const localeDateString = dateTimeFormat(date2, locale, {
    dateStyle: "short",
    timeStyle: "short",
    ...options
  });
  return localeDateString;
};
const localeDate = (value, locale = navigator.language, options) => {
  if (!value)
    return value;
  const date2 = new Date(value);
  if (!isValidDate(date2))
    return value;
  const localeDateString = dateTimeFormat(date2, locale, {
    dateStyle: "short",
    ...options
  });
  return localeDateString;
};
const localeTime = (value, locale = navigator.language, options) => {
  if (!value)
    return value;
  const date2 = new Date(value);
  if (!isValidDate(date2))
    return value;
  const localeDateString = dateTimeFormat(date2, locale, {
    timeStyle: "short",
    ...options
  });
  return localeDateString;
};
const unmaskDate = (value, locale = navigator.language) => {
  const dateObject = date(value, locale);
  if (!isValidDate(dateObject))
    return "";
  return dateObject.toISOString();
};
const tokens = {
  d: { test: (v) => /\d/.test(v), transform: (v) => v },
  a: {
    test: (v) => /[a-z]/i.test(v),
    transform: (v) => v.toLowerCase()
  },
  A: {
    test: (v) => /[a-z]/i.test(v),
    transform: (v) => v.toUpperCase()
  },
  w: {
    test: (v) => /\w/.test(v),
    transform: (v) => v.toLowerCase()
  },
  W: {
    test: (v) => /\w/.test(v),
    transform: (v) => v.toUpperCase()
  }
};
const unmask = (value, pattern) => {
  if (!value)
    return value;
  value = value.replace(/\W/gi, "");
  return !!pattern ? value.slice(0, pattern.replace(/\W/gi, "").length) : value;
};
const mask = (value, patterns) => {
  if (!value)
    return "";
  if (!patterns)
    throw ReferenceError("Value or pattern not found.");
  if (!Array.isArray(patterns))
    throw ReferenceError("Pattern should be an array");
  const [pattern, dynamicPattern] = patterns.sort((a, b) => a.length - b.length);
  const computedPattern = unmask(value).length <= unmask(pattern).length ? pattern : dynamicPattern;
  let output = "";
  for (let unmaskedValue = unmask(value, computedPattern), unmaskedPattern = unmask(computedPattern), patternLength = computedPattern.length, i = 0, ii = 0; i < patternLength && unmaskedValue[ii]; i++) {
    const token = tokens[unmaskedPattern[ii]], patternChar = computedPattern[i], inputChar = unmaskedValue[ii];
    if (!token.test(inputChar))
      break;
    else if (/\W/.test(patternChar))
      output += patternChar;
    else
      output += token.transform(inputChar), ii++;
  }
  return output;
};
const unmaskNumber = (value) => {
  const digits = value.replace(/\D/g, "");
  let output = 0;
  output = parseFloat(digits);
  return output;
};
const numberUnformat = (value, locale) => {
  const parts = new Intl.NumberFormat(locale).formatToParts(1111.1);
  return reverseFormat(value, parts);
};
const currencyUnformat = (value, locale = navigator.language, currency = currencyLocale[locale.slice(-2)]) => {
  var _a;
  const parts = new Intl.NumberFormat(locale, {
    style: "currency",
    currency
  }).formatToParts(1111.1);
  const currencySymbol = (_a = parts.find(({ type }) => type === "currency")) == null ? void 0 : _a.value;
  const reversedValue = !!currencySymbol ? value.replace(currencySymbol, "") : value;
  const output = reverseFormat(reversedValue, parts);
  return output;
};
const reverseFormat = (value, parts) => {
  var _a, _b;
  const group = (_a = parts.find((part) => part.type === "group")) == null ? void 0 : _a.value;
  const decimal = (_b = parts.find((part) => part.type === "decimal")) == null ? void 0 : _b.value;
  if (group)
    value = value.replace(group, "");
  if (decimal)
    value = value.replace(decimal, ".");
  return Number.isNaN(value) ? NaN : parseFloat(value);
};
const inputNumber = (value) => {
  const unmaskedNumber = unmaskNumber(value);
  return isNaN(unmaskedNumber) ? "" : numberFormat(unmaskedNumber);
};
const inputCurrency = (value) => {
  const unmaskedNumber = unmaskNumber(value) / 100;
  return isNaN(unmaskedNumber) ? "" : currencyFormat(unmaskedNumber);
};
const inputDate = (value, locale = navigator.language) => {
  if (!value)
    return value;
  const pattern = getDatePattern();
  const computedDate = getComputedDate(value);
  const maskedDate = mask(computedDate, [pattern]);
  const dateObject = date(maskedDate, locale);
  if (!isValidDate(dateObject))
    throw new Error("Invalid date");
  return mask(value, [pattern]);
};
const input = (element, patterns) => {
  if (!element || typeof element !== "object") {
    throw Error("Element not found.");
  }
  if (!patterns) {
    throw ReferenceError("Pattern should be an array");
  }
  if (!Array.isArray(patterns)) {
    throw ReferenceError("Pattern should be an array");
  }
  const [pattern, dynamicPattern] = patterns.sort((a, b) => a.length - b.length);
  let listener;
  switch (pattern) {
    case "currency": {
      element.placeholder = currencyFormat(0);
      listener = () => {
        element.value = inputCurrency(element.value);
      };
      break;
    }
    case "number": {
      listener = () => {
        element.value = inputNumber(element.value);
      };
      break;
    }
    case "date": {
      const pattern2 = getDatePattern();
      element.minLength = element.maxLength = pattern2.length;
      element.pattern = `.{${pattern2.length},${pattern2.length}}`;
      listener = () => {
        try {
          const maskedDate = inputDate(element.value);
          element.value = maskedDate;
          element.defaultValue = maskedDate;
        } catch {
          element.value = element.defaultValue;
        }
      };
      break;
    }
    default: {
      element.minLength = pattern.length;
      element.maxLength = (dynamicPattern == null ? void 0 : dynamicPattern.length) || pattern.length;
      element.pattern = `.{${pattern.length},${(dynamicPattern == null ? void 0 : dynamicPattern.length) || pattern.length}}`;
      listener = () => {
        element.value = mask(element.value, patterns);
      };
    }
  }
  element.value && listener();
  element.addEventListener("input", listener);
  return () => {
    element.removeEventListener("input", listener);
  };
};
const prepareMaskInputs = () => {
  const inputs = document.querySelectorAll("[data-mask]");
  inputs.forEach((el) => input(el, datasetToObject(el.dataset.mask)));
};
const datasetToObject = (value) => JSON.parse(value.replace(/'/g, '"'));

//# sourceMappingURL=index.es.js.map


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfc21hc2tfbGliX2luZGV4X2VzX2pzLmMzNmFmMi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnBhY2svLi9ub2RlX21vZHVsZXMvc21hc2svbGliL2luZGV4LmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG51bWJlckZvcm1hdCA9ICh2YWx1ZSwgbG9jYWxlID0gbmF2aWdhdG9yLmxhbmd1YWdlLCBzdHlsZSA9IFwiZGVjaW1hbFwiLCBvcHRpb25zKSA9PiB7XG4gIG9wdGlvbnMgPSB7IHN0eWxlLCAuLi5vcHRpb25zIH07XG4gIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlLCBvcHRpb25zKS5mb3JtYXQodmFsdWUpO1xufTtcbmNvbnN0IGN1cnJlbmN5TG9jYWxlID0ge1xuICBBRDogXCJFVVJcIixcbiAgQUU6IFwiQUVEXCIsXG4gIEFGOiBcIkFGTlwiLFxuICBBRzogXCJYQ0RcIixcbiAgQUk6IFwiWENEXCIsXG4gIEFMOiBcIkFMTFwiLFxuICBBTTogXCJBTURcIixcbiAgQU86IFwiQU9BXCIsXG4gIEFSOiBcIkFSU1wiLFxuICBBUzogXCJVU0RcIixcbiAgQVQ6IFwiRVVSXCIsXG4gIEFVOiBcIkFVRFwiLFxuICBBVzogXCJBV0dcIixcbiAgQVg6IFwiRVVSXCIsXG4gIEFaOiBcIkFaTlwiLFxuICBCQTogXCJCQU1cIixcbiAgQkI6IFwiQkJEXCIsXG4gIEJEOiBcIkJEVFwiLFxuICBCRTogXCJFVVJcIixcbiAgQkY6IFwiWE9GXCIsXG4gIEJHOiBcIkJHTlwiLFxuICBCSDogXCJCSERcIixcbiAgQkk6IFwiQklGXCIsXG4gIEJKOiBcIlhPRlwiLFxuICBCTDogXCJFVVJcIixcbiAgQk06IFwiQk1EXCIsXG4gIEJOOiBcIkJORFwiLFxuICBCTzogXCJCT0JcIixcbiAgQlE6IFwiVVNEXCIsXG4gIEJSOiBcIkJSTFwiLFxuICBCUzogXCJCU0RcIixcbiAgQlQ6IFwiQlROXCIsXG4gIEJWOiBcIk5PS1wiLFxuICBCVzogXCJCV1BcIixcbiAgQlk6IFwiQllOXCIsXG4gIEJaOiBcIkJaRFwiLFxuICBDQTogXCJDQURcIixcbiAgQ0M6IFwiQVVEXCIsXG4gIENEOiBcIkNERlwiLFxuICBDRjogXCJYQUZcIixcbiAgQ0c6IFwiWEFGXCIsXG4gIENIOiBcIkNIRlwiLFxuICBDSTogXCJYT0ZcIixcbiAgQ0s6IFwiTlpEXCIsXG4gIENMOiBcIkNMUFwiLFxuICBDTTogXCJYQUZcIixcbiAgQ046IFwiQ05ZXCIsXG4gIENPOiBcIkNPUFwiLFxuICBDUjogXCJDUkNcIixcbiAgQ1U6IFwiQ1VQXCIsXG4gIENWOiBcIkNWRVwiLFxuICBDVzogXCJBTkdcIixcbiAgQ1g6IFwiQVVEXCIsXG4gIENZOiBcIkVVUlwiLFxuICBDWjogXCJDWktcIixcbiAgREU6IFwiRVVSXCIsXG4gIERKOiBcIkRKRlwiLFxuICBESzogXCJES0tcIixcbiAgRE06IFwiWENEXCIsXG4gIERPOiBcIkRPUFwiLFxuICBEWjogXCJEWkRcIixcbiAgRUM6IFwiVVNEXCIsXG4gIEVFOiBcIkVVUlwiLFxuICBFRzogXCJFR1BcIixcbiAgRUg6IFwiTUFEXCIsXG4gIEVSOiBcIkVSTlwiLFxuICBFUzogXCJFVVJcIixcbiAgRVQ6IFwiRVRCXCIsXG4gIEZJOiBcIkVVUlwiLFxuICBGSjogXCJGSkRcIixcbiAgRks6IFwiRktQXCIsXG4gIEZNOiBcIlVTRFwiLFxuICBGTzogXCJES0tcIixcbiAgRlI6IFwiRVVSXCIsXG4gIEdBOiBcIlhBRlwiLFxuICBHQjogXCJHQlBcIixcbiAgR0Q6IFwiWENEXCIsXG4gIEdFOiBcIkdFTFwiLFxuICBHRjogXCJFVVJcIixcbiAgR0c6IFwiR0JQXCIsXG4gIEdIOiBcIkdIU1wiLFxuICBHSTogXCJHSVBcIixcbiAgR0w6IFwiREtLXCIsXG4gIEdNOiBcIkdNRFwiLFxuICBHTjogXCJHTkZcIixcbiAgR1A6IFwiRVVSXCIsXG4gIEdROiBcIlhBRlwiLFxuICBHUjogXCJFVVJcIixcbiAgR1M6IFwiR0JQXCIsXG4gIEdUOiBcIkdUUVwiLFxuICBHVTogXCJVU0RcIixcbiAgR1c6IFwiWE9GXCIsXG4gIEdZOiBcIkdZRFwiLFxuICBISzogXCJIS0RcIixcbiAgSE06IFwiQVVEXCIsXG4gIEhOOiBcIkhOTFwiLFxuICBIUjogXCJIUktcIixcbiAgSFQ6IFwiSFRHXCIsXG4gIEhVOiBcIkhVRlwiLFxuICBJRDogXCJJRFJcIixcbiAgSUU6IFwiRVVSXCIsXG4gIElMOiBcIklMU1wiLFxuICBJTTogXCJHQlBcIixcbiAgSU46IFwiSU5SXCIsXG4gIElPOiBcIlVTRFwiLFxuICBJUTogXCJJUURcIixcbiAgSVI6IFwiSVJSXCIsXG4gIElTOiBcIklTS1wiLFxuICBJVDogXCJFVVJcIixcbiAgSkU6IFwiR0JQXCIsXG4gIEpNOiBcIkpNRFwiLFxuICBKTzogXCJKT0RcIixcbiAgSlA6IFwiSlBZXCIsXG4gIEtFOiBcIktFU1wiLFxuICBLRzogXCJLR1NcIixcbiAgS0g6IFwiS0hSXCIsXG4gIEtJOiBcIkFVRFwiLFxuICBLTTogXCJLTUZcIixcbiAgS046IFwiWENEXCIsXG4gIEtQOiBcIktQV1wiLFxuICBLUjogXCJLUldcIixcbiAgS1c6IFwiS1dEXCIsXG4gIEtZOiBcIktZRFwiLFxuICBLWjogXCJLWlRcIixcbiAgTEE6IFwiTEFLXCIsXG4gIExCOiBcIkxCUFwiLFxuICBMQzogXCJYQ0RcIixcbiAgTEk6IFwiQ0hGXCIsXG4gIExLOiBcIkxLUlwiLFxuICBMUjogXCJMUkRcIixcbiAgTFM6IFwiTFNMXCIsXG4gIExUOiBcIkVVUlwiLFxuICBMVTogXCJFVVJcIixcbiAgTFY6IFwiRVVSXCIsXG4gIExZOiBcIkxZRFwiLFxuICBNQTogXCJNQURcIixcbiAgTUM6IFwiRVVSXCIsXG4gIE1EOiBcIk1ETFwiLFxuICBNRTogXCJFVVJcIixcbiAgTUY6IFwiRVVSXCIsXG4gIE1HOiBcIk1HQVwiLFxuICBNSDogXCJVU0RcIixcbiAgTUs6IFwiTUtEXCIsXG4gIE1MOiBcIlhPRlwiLFxuICBNTTogXCJNTUtcIixcbiAgTU46IFwiTU5UXCIsXG4gIE1POiBcIk1PUFwiLFxuICBNUDogXCJVU0RcIixcbiAgTVE6IFwiRVVSXCIsXG4gIE1SOiBcIk1ST1wiLFxuICBNUzogXCJYQ0RcIixcbiAgTVQ6IFwiRVVSXCIsXG4gIE1VOiBcIk1VUlwiLFxuICBNVjogXCJNVlJcIixcbiAgTVc6IFwiTVdLXCIsXG4gIE1YOiBcIk1YTlwiLFxuICBNWTogXCJNWVJcIixcbiAgTVo6IFwiTVpOXCIsXG4gIE5BOiBcIk5BRFwiLFxuICBOQzogXCJYUEZcIixcbiAgTkU6IFwiWE9GXCIsXG4gIE5GOiBcIkFVRFwiLFxuICBORzogXCJOR05cIixcbiAgTkk6IFwiTklPXCIsXG4gIE5MOiBcIkVVUlwiLFxuICBOTzogXCJOT0tcIixcbiAgTlA6IFwiTlBSXCIsXG4gIE5SOiBcIkFVRFwiLFxuICBOVTogXCJOWkRcIixcbiAgTlo6IFwiTlpEXCIsXG4gIE9NOiBcIk9NUlwiLFxuICBQQTogXCJQQUJcIixcbiAgUEU6IFwiUEVOXCIsXG4gIFBGOiBcIlhQRlwiLFxuICBQRzogXCJQR0tcIixcbiAgUEg6IFwiUEhQXCIsXG4gIFBLOiBcIlBLUlwiLFxuICBQTDogXCJQTE5cIixcbiAgUE06IFwiRVVSXCIsXG4gIFBOOiBcIk5aRFwiLFxuICBQUjogXCJVU0RcIixcbiAgUFM6IFwiSUxTXCIsXG4gIFBUOiBcIkVVUlwiLFxuICBQVzogXCJVU0RcIixcbiAgUFk6IFwiUFlHXCIsXG4gIFFBOiBcIlFBUlwiLFxuICBSRTogXCJFVVJcIixcbiAgUk86IFwiUk9OXCIsXG4gIFJTOiBcIlJTRFwiLFxuICBSVTogXCJSVUJcIixcbiAgUlc6IFwiUldGXCIsXG4gIFNBOiBcIlNBUlwiLFxuICBTQjogXCJTQkRcIixcbiAgU0M6IFwiU0NSXCIsXG4gIFNEOiBcIlNER1wiLFxuICBTRTogXCJTRUtcIixcbiAgU0c6IFwiU0dEXCIsXG4gIFNIOiBcIlNIUFwiLFxuICBTSTogXCJFVVJcIixcbiAgU0o6IFwiTk9LXCIsXG4gIFNLOiBcIkVVUlwiLFxuICBTTDogXCJTTExcIixcbiAgU006IFwiRVVSXCIsXG4gIFNOOiBcIlhPRlwiLFxuICBTTzogXCJTT1NcIixcbiAgU1I6IFwiU1JEXCIsXG4gIFNUOiBcIlNURFwiLFxuICBTVjogXCJTVkNcIixcbiAgU1g6IFwiQU5HXCIsXG4gIFNZOiBcIlNZUFwiLFxuICBTWjogXCJTWkxcIixcbiAgVEM6IFwiVVNEXCIsXG4gIFREOiBcIlhBRlwiLFxuICBURjogXCJFVVJcIixcbiAgVEc6IFwiWE9GXCIsXG4gIFRIOiBcIlRIQlwiLFxuICBUSjogXCJUSlNcIixcbiAgVEs6IFwiTlpEXCIsXG4gIFRMOiBcIlVTRFwiLFxuICBUTTogXCJUTVRcIixcbiAgVE46IFwiVE5EXCIsXG4gIFRPOiBcIlRPUFwiLFxuICBUUjogXCJUUllcIixcbiAgVFQ6IFwiVFREXCIsXG4gIFRWOiBcIkFVRFwiLFxuICBUVzogXCJUV0RcIixcbiAgVFo6IFwiVFpTXCIsXG4gIFVBOiBcIlVBSFwiLFxuICBVRzogXCJVR1hcIixcbiAgVU06IFwiVVNEXCIsXG4gIFVTOiBcIlVTRFwiLFxuICBVWTogXCJVWVVcIixcbiAgVVo6IFwiVVpTXCIsXG4gIFZBOiBcIkVVUlwiLFxuICBWQzogXCJYQ0RcIixcbiAgVkU6IFwiVkVGXCIsXG4gIFZHOiBcIlVTRFwiLFxuICBWSTogXCJVU0RcIixcbiAgVk46IFwiVk5EXCIsXG4gIFZVOiBcIlZVVlwiLFxuICBXRjogXCJYUEZcIixcbiAgV1M6IFwiV1NUXCIsXG4gIFlFOiBcIllFUlwiLFxuICBZVDogXCJFVVJcIixcbiAgWkE6IFwiWkFSXCIsXG4gIFpNOiBcIlpNV1wiLFxuICBaVzogXCJaV0xcIlxufTtcbmNvbnN0IGN1cnJlbmN5Rm9ybWF0ID0gKHZhbHVlLCBsb2NhbGUgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UsIGN1cnJlbmN5ID0gY3VycmVuY3lMb2NhbGVbbG9jYWxlLnNsaWNlKC0yKV0pID0+IHtcbiAgcmV0dXJuIG51bWJlckZvcm1hdCh2YWx1ZSwgbG9jYWxlLCBcImN1cnJlbmN5XCIsIHsgY3VycmVuY3kgfSk7XG59O1xuY29uc3QgcmVmZXJlbmNlRGF0ZURpZ2l0cyA9IFwiMDEvMDEvMTk3MFwiLnJlcGxhY2UoL1xcRC9nLCBcIlwiKTtcbmNvbnN0IGdldENvbXB1dGVkRGF0ZSA9ICh2YWx1ZSkgPT4ge1xuICBjb25zdCB2YWx1ZURpZ2l0cyA9IHZhbHVlLnJlcGxhY2UoL1xcRC9nLCBcIlwiKTtcbiAgY29uc3QgY29tcHV0ZWREYXRlID0gdmFsdWVEaWdpdHMgKyByZWZlcmVuY2VEYXRlRGlnaXRzLnNsaWNlKHZhbHVlRGlnaXRzLmxlbmd0aCk7XG4gIHJldHVybiBjb21wdXRlZERhdGU7XG59O1xuY29uc3QgZ2V0RGF0ZVBhcnRzID0gKGxvY2FsZXMpID0+IHtcbiAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZXMpLmZvcm1hdFRvUGFydHMoKTtcbn07XG5jb25zdCBpc1ZhbGlkRGF0ZSA9IChkYXRlMikgPT4ge1xuICByZXR1cm4gZGF0ZTIgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTihkYXRlMi52YWx1ZU9mKCkpO1xufTtcbmNvbnN0IGdldERhdGVQYXR0ZXJuID0gKGxvY2FsZSkgPT4ge1xuICBsZXQgcGF0dGVybiA9IFwiXCI7XG4gIGNvbnN0IGRhdGVQYXJ0cyA9IGdldERhdGVQYXJ0cyhsb2NhbGUpO1xuICBkYXRlUGFydHMuZm9yRWFjaCgoeyB0eXBlLCB2YWx1ZSB9KSA9PiB7XG4gICAgaWYgKHR5cGUgPT09IFwibW9udGhcIiB8fCB0eXBlID09PSBcImRheVwiKVxuICAgICAgcGF0dGVybiArPSBcImRkXCI7XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJ5ZWFyXCIpXG4gICAgICBwYXR0ZXJuICs9IFwiZGRkZFwiO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwibGl0ZXJhbFwiKVxuICAgICAgcGF0dGVybiArPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiBwYXR0ZXJuO1xufTtcbmNvbnN0IGRhdGUgPSAoZGF0ZTIsIGxvY2FsZSkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGRhdGVQYXJ0cyA9IGdldERhdGVQYXJ0cyhsb2NhbGUpO1xuICBjb25zdCBzcGxpdENoYXIgPSAoX2EgPSBkYXRlUGFydHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwibGl0ZXJhbFwiKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICBjb25zdCBkYXRlQXJyYXkgPSBkYXRlMi5zcGxpdChzcGxpdENoYXIpO1xuICBjb25zdCB7IG1vbnRoLCBkYXksIHllYXIgfSA9IHtcbiAgICBbZGF0ZVBhcnRzWzBdLnR5cGVdOiBkYXRlQXJyYXlbMF0sXG4gICAgW2RhdGVQYXJ0c1syXS50eXBlXTogZGF0ZUFycmF5WzFdLFxuICAgIFtkYXRlUGFydHNbNF0udHlwZV06IGRhdGVBcnJheVsyXVxuICB9O1xuICBjb25zdCBkYXRlRm9ybWF0ID0gYCR7bW9udGh9LyR7ZGF5fS8ke3llYXJ9YDtcbiAgcmV0dXJuIG5ldyBEYXRlKGRhdGVGb3JtYXQpO1xufTtcbmNvbnN0IGRhdGVUaW1lRm9ybWF0ID0gKHZhbHVlLCBsb2NhbGUgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UsIG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgb3B0aW9ucykuZm9ybWF0KHZhbHVlKTtcbn07XG5jb25zdCBsb2NhbGVEYXRlVGltZSA9ICh2YWx1ZSwgbG9jYWxlID0gbmF2aWdhdG9yLmxhbmd1YWdlLCBvcHRpb25zKSA9PiB7XG4gIGlmICghdmFsdWUpXG4gICAgcmV0dXJuIHZhbHVlO1xuICBjb25zdCBkYXRlMiA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgaWYgKCFpc1ZhbGlkRGF0ZShkYXRlMikpXG4gICAgcmV0dXJuIHZhbHVlO1xuICBjb25zdCBsb2NhbGVEYXRlU3RyaW5nID0gZGF0ZVRpbWVGb3JtYXQoZGF0ZTIsIGxvY2FsZSwge1xuICAgIGRhdGVTdHlsZTogXCJzaG9ydFwiLFxuICAgIHRpbWVTdHlsZTogXCJzaG9ydFwiLFxuICAgIC4uLm9wdGlvbnNcbiAgfSk7XG4gIHJldHVybiBsb2NhbGVEYXRlU3RyaW5nO1xufTtcbmNvbnN0IGxvY2FsZURhdGUgPSAodmFsdWUsIGxvY2FsZSA9IG5hdmlnYXRvci5sYW5ndWFnZSwgb3B0aW9ucykgPT4ge1xuICBpZiAoIXZhbHVlKVxuICAgIHJldHVybiB2YWx1ZTtcbiAgY29uc3QgZGF0ZTIgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gIGlmICghaXNWYWxpZERhdGUoZGF0ZTIpKVxuICAgIHJldHVybiB2YWx1ZTtcbiAgY29uc3QgbG9jYWxlRGF0ZVN0cmluZyA9IGRhdGVUaW1lRm9ybWF0KGRhdGUyLCBsb2NhbGUsIHtcbiAgICBkYXRlU3R5bGU6IFwic2hvcnRcIixcbiAgICAuLi5vcHRpb25zXG4gIH0pO1xuICByZXR1cm4gbG9jYWxlRGF0ZVN0cmluZztcbn07XG5jb25zdCBsb2NhbGVUaW1lID0gKHZhbHVlLCBsb2NhbGUgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UsIG9wdGlvbnMpID0+IHtcbiAgaWYgKCF2YWx1ZSlcbiAgICByZXR1cm4gdmFsdWU7XG4gIGNvbnN0IGRhdGUyID0gbmV3IERhdGUodmFsdWUpO1xuICBpZiAoIWlzVmFsaWREYXRlKGRhdGUyKSlcbiAgICByZXR1cm4gdmFsdWU7XG4gIGNvbnN0IGxvY2FsZURhdGVTdHJpbmcgPSBkYXRlVGltZUZvcm1hdChkYXRlMiwgbG9jYWxlLCB7XG4gICAgdGltZVN0eWxlOiBcInNob3J0XCIsXG4gICAgLi4ub3B0aW9uc1xuICB9KTtcbiAgcmV0dXJuIGxvY2FsZURhdGVTdHJpbmc7XG59O1xuY29uc3QgdW5tYXNrRGF0ZSA9ICh2YWx1ZSwgbG9jYWxlID0gbmF2aWdhdG9yLmxhbmd1YWdlKSA9PiB7XG4gIGNvbnN0IGRhdGVPYmplY3QgPSBkYXRlKHZhbHVlLCBsb2NhbGUpO1xuICBpZiAoIWlzVmFsaWREYXRlKGRhdGVPYmplY3QpKVxuICAgIHJldHVybiBcIlwiO1xuICByZXR1cm4gZGF0ZU9iamVjdC50b0lTT1N0cmluZygpO1xufTtcbmNvbnN0IHRva2VucyA9IHtcbiAgZDogeyB0ZXN0OiAodikgPT4gL1xcZC8udGVzdCh2KSwgdHJhbnNmb3JtOiAodikgPT4gdiB9LFxuICBhOiB7XG4gICAgdGVzdDogKHYpID0+IC9bYS16XS9pLnRlc3QodiksXG4gICAgdHJhbnNmb3JtOiAodikgPT4gdi50b0xvd2VyQ2FzZSgpXG4gIH0sXG4gIEE6IHtcbiAgICB0ZXN0OiAodikgPT4gL1thLXpdL2kudGVzdCh2KSxcbiAgICB0cmFuc2Zvcm06ICh2KSA9PiB2LnRvVXBwZXJDYXNlKClcbiAgfSxcbiAgdzoge1xuICAgIHRlc3Q6ICh2KSA9PiAvXFx3Ly50ZXN0KHYpLFxuICAgIHRyYW5zZm9ybTogKHYpID0+IHYudG9Mb3dlckNhc2UoKVxuICB9LFxuICBXOiB7XG4gICAgdGVzdDogKHYpID0+IC9cXHcvLnRlc3QodiksXG4gICAgdHJhbnNmb3JtOiAodikgPT4gdi50b1VwcGVyQ2FzZSgpXG4gIH1cbn07XG5jb25zdCB1bm1hc2sgPSAodmFsdWUsIHBhdHRlcm4pID0+IHtcbiAgaWYgKCF2YWx1ZSlcbiAgICByZXR1cm4gdmFsdWU7XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxXL2dpLCBcIlwiKTtcbiAgcmV0dXJuICEhcGF0dGVybiA/IHZhbHVlLnNsaWNlKDAsIHBhdHRlcm4ucmVwbGFjZSgvXFxXL2dpLCBcIlwiKS5sZW5ndGgpIDogdmFsdWU7XG59O1xuY29uc3QgbWFzayA9ICh2YWx1ZSwgcGF0dGVybnMpID0+IHtcbiAgaWYgKCF2YWx1ZSlcbiAgICByZXR1cm4gXCJcIjtcbiAgaWYgKCFwYXR0ZXJucylcbiAgICB0aHJvdyBSZWZlcmVuY2VFcnJvcihcIlZhbHVlIG9yIHBhdHRlcm4gbm90IGZvdW5kLlwiKTtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHBhdHRlcm5zKSlcbiAgICB0aHJvdyBSZWZlcmVuY2VFcnJvcihcIlBhdHRlcm4gc2hvdWxkIGJlIGFuIGFycmF5XCIpO1xuICBjb25zdCBbcGF0dGVybiwgZHluYW1pY1BhdHRlcm5dID0gcGF0dGVybnMuc29ydCgoYSwgYikgPT4gYS5sZW5ndGggLSBiLmxlbmd0aCk7XG4gIGNvbnN0IGNvbXB1dGVkUGF0dGVybiA9IHVubWFzayh2YWx1ZSkubGVuZ3RoIDw9IHVubWFzayhwYXR0ZXJuKS5sZW5ndGggPyBwYXR0ZXJuIDogZHluYW1pY1BhdHRlcm47XG4gIGxldCBvdXRwdXQgPSBcIlwiO1xuICBmb3IgKGxldCB1bm1hc2tlZFZhbHVlID0gdW5tYXNrKHZhbHVlLCBjb21wdXRlZFBhdHRlcm4pLCB1bm1hc2tlZFBhdHRlcm4gPSB1bm1hc2soY29tcHV0ZWRQYXR0ZXJuKSwgcGF0dGVybkxlbmd0aCA9IGNvbXB1dGVkUGF0dGVybi5sZW5ndGgsIGkgPSAwLCBpaSA9IDA7IGkgPCBwYXR0ZXJuTGVuZ3RoICYmIHVubWFza2VkVmFsdWVbaWldOyBpKyspIHtcbiAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1t1bm1hc2tlZFBhdHRlcm5baWldXSwgcGF0dGVybkNoYXIgPSBjb21wdXRlZFBhdHRlcm5baV0sIGlucHV0Q2hhciA9IHVubWFza2VkVmFsdWVbaWldO1xuICAgIGlmICghdG9rZW4udGVzdChpbnB1dENoYXIpKVxuICAgICAgYnJlYWs7XG4gICAgZWxzZSBpZiAoL1xcVy8udGVzdChwYXR0ZXJuQ2hhcikpXG4gICAgICBvdXRwdXQgKz0gcGF0dGVybkNoYXI7XG4gICAgZWxzZVxuICAgICAgb3V0cHV0ICs9IHRva2VuLnRyYW5zZm9ybShpbnB1dENoYXIpLCBpaSsrO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59O1xuY29uc3QgdW5tYXNrTnVtYmVyID0gKHZhbHVlKSA9PiB7XG4gIGNvbnN0IGRpZ2l0cyA9IHZhbHVlLnJlcGxhY2UoL1xcRC9nLCBcIlwiKTtcbiAgbGV0IG91dHB1dCA9IDA7XG4gIG91dHB1dCA9IHBhcnNlRmxvYXQoZGlnaXRzKTtcbiAgcmV0dXJuIG91dHB1dDtcbn07XG5jb25zdCBudW1iZXJVbmZvcm1hdCA9ICh2YWx1ZSwgbG9jYWxlKSA9PiB7XG4gIGNvbnN0IHBhcnRzID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSkuZm9ybWF0VG9QYXJ0cygxMTExLjEpO1xuICByZXR1cm4gcmV2ZXJzZUZvcm1hdCh2YWx1ZSwgcGFydHMpO1xufTtcbmNvbnN0IGN1cnJlbmN5VW5mb3JtYXQgPSAodmFsdWUsIGxvY2FsZSA9IG5hdmlnYXRvci5sYW5ndWFnZSwgY3VycmVuY3kgPSBjdXJyZW5jeUxvY2FsZVtsb2NhbGUuc2xpY2UoLTIpXSkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IHBhcnRzID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZSwge1xuICAgIHN0eWxlOiBcImN1cnJlbmN5XCIsXG4gICAgY3VycmVuY3lcbiAgfSkuZm9ybWF0VG9QYXJ0cygxMTExLjEpO1xuICBjb25zdCBjdXJyZW5jeVN5bWJvbCA9IChfYSA9IHBhcnRzLmZpbmQoKHsgdHlwZSB9KSA9PiB0eXBlID09PSBcImN1cnJlbmN5XCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmFsdWU7XG4gIGNvbnN0IHJldmVyc2VkVmFsdWUgPSAhIWN1cnJlbmN5U3ltYm9sID8gdmFsdWUucmVwbGFjZShjdXJyZW5jeVN5bWJvbCwgXCJcIikgOiB2YWx1ZTtcbiAgY29uc3Qgb3V0cHV0ID0gcmV2ZXJzZUZvcm1hdChyZXZlcnNlZFZhbHVlLCBwYXJ0cyk7XG4gIHJldHVybiBvdXRwdXQ7XG59O1xuY29uc3QgcmV2ZXJzZUZvcm1hdCA9ICh2YWx1ZSwgcGFydHMpID0+IHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgZ3JvdXAgPSAoX2EgPSBwYXJ0cy5maW5kKChwYXJ0KSA9PiBwYXJ0LnR5cGUgPT09IFwiZ3JvdXBcIikpID09IG51bGwgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgY29uc3QgZGVjaW1hbCA9IChfYiA9IHBhcnRzLmZpbmQoKHBhcnQpID0+IHBhcnQudHlwZSA9PT0gXCJkZWNpbWFsXCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2IudmFsdWU7XG4gIGlmIChncm91cClcbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoZ3JvdXAsIFwiXCIpO1xuICBpZiAoZGVjaW1hbClcbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoZGVjaW1hbCwgXCIuXCIpO1xuICByZXR1cm4gTnVtYmVyLmlzTmFOKHZhbHVlKSA/IE5hTiA6IHBhcnNlRmxvYXQodmFsdWUpO1xufTtcbmNvbnN0IGlucHV0TnVtYmVyID0gKHZhbHVlKSA9PiB7XG4gIGNvbnN0IHVubWFza2VkTnVtYmVyID0gdW5tYXNrTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIGlzTmFOKHVubWFza2VkTnVtYmVyKSA/IFwiXCIgOiBudW1iZXJGb3JtYXQodW5tYXNrZWROdW1iZXIpO1xufTtcbmNvbnN0IGlucHV0Q3VycmVuY3kgPSAodmFsdWUpID0+IHtcbiAgY29uc3QgdW5tYXNrZWROdW1iZXIgPSB1bm1hc2tOdW1iZXIodmFsdWUpIC8gMTAwO1xuICByZXR1cm4gaXNOYU4odW5tYXNrZWROdW1iZXIpID8gXCJcIiA6IGN1cnJlbmN5Rm9ybWF0KHVubWFza2VkTnVtYmVyKTtcbn07XG5jb25zdCBpbnB1dERhdGUgPSAodmFsdWUsIGxvY2FsZSA9IG5hdmlnYXRvci5sYW5ndWFnZSkgPT4ge1xuICBpZiAoIXZhbHVlKVxuICAgIHJldHVybiB2YWx1ZTtcbiAgY29uc3QgcGF0dGVybiA9IGdldERhdGVQYXR0ZXJuKCk7XG4gIGNvbnN0IGNvbXB1dGVkRGF0ZSA9IGdldENvbXB1dGVkRGF0ZSh2YWx1ZSk7XG4gIGNvbnN0IG1hc2tlZERhdGUgPSBtYXNrKGNvbXB1dGVkRGF0ZSwgW3BhdHRlcm5dKTtcbiAgY29uc3QgZGF0ZU9iamVjdCA9IGRhdGUobWFza2VkRGF0ZSwgbG9jYWxlKTtcbiAgaWYgKCFpc1ZhbGlkRGF0ZShkYXRlT2JqZWN0KSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGVcIik7XG4gIHJldHVybiBtYXNrKHZhbHVlLCBbcGF0dGVybl0pO1xufTtcbmNvbnN0IGlucHV0ID0gKGVsZW1lbnQsIHBhdHRlcm5zKSA9PiB7XG4gIGlmICghZWxlbWVudCB8fCB0eXBlb2YgZWxlbWVudCAhPT0gXCJvYmplY3RcIikge1xuICAgIHRocm93IEVycm9yKFwiRWxlbWVudCBub3QgZm91bmQuXCIpO1xuICB9XG4gIGlmICghcGF0dGVybnMpIHtcbiAgICB0aHJvdyBSZWZlcmVuY2VFcnJvcihcIlBhdHRlcm4gc2hvdWxkIGJlIGFuIGFycmF5XCIpO1xuICB9XG4gIGlmICghQXJyYXkuaXNBcnJheShwYXR0ZXJucykpIHtcbiAgICB0aHJvdyBSZWZlcmVuY2VFcnJvcihcIlBhdHRlcm4gc2hvdWxkIGJlIGFuIGFycmF5XCIpO1xuICB9XG4gIGNvbnN0IFtwYXR0ZXJuLCBkeW5hbWljUGF0dGVybl0gPSBwYXR0ZXJucy5zb3J0KChhLCBiKSA9PiBhLmxlbmd0aCAtIGIubGVuZ3RoKTtcbiAgbGV0IGxpc3RlbmVyO1xuICBzd2l0Y2ggKHBhdHRlcm4pIHtcbiAgICBjYXNlIFwiY3VycmVuY3lcIjoge1xuICAgICAgZWxlbWVudC5wbGFjZWhvbGRlciA9IGN1cnJlbmN5Rm9ybWF0KDApO1xuICAgICAgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBpbnB1dEN1cnJlbmN5KGVsZW1lbnQudmFsdWUpO1xuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwibnVtYmVyXCI6IHtcbiAgICAgIGxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICBlbGVtZW50LnZhbHVlID0gaW5wdXROdW1iZXIoZWxlbWVudC52YWx1ZSk7XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJkYXRlXCI6IHtcbiAgICAgIGNvbnN0IHBhdHRlcm4yID0gZ2V0RGF0ZVBhdHRlcm4oKTtcbiAgICAgIGVsZW1lbnQubWluTGVuZ3RoID0gZWxlbWVudC5tYXhMZW5ndGggPSBwYXR0ZXJuMi5sZW5ndGg7XG4gICAgICBlbGVtZW50LnBhdHRlcm4gPSBgLnske3BhdHRlcm4yLmxlbmd0aH0sJHtwYXR0ZXJuMi5sZW5ndGh9fWA7XG4gICAgICBsaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBtYXNrZWREYXRlID0gaW5wdXREYXRlKGVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBtYXNrZWREYXRlO1xuICAgICAgICAgIGVsZW1lbnQuZGVmYXVsdFZhbHVlID0gbWFza2VkRGF0ZTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGVsZW1lbnQuZGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIGVsZW1lbnQubWluTGVuZ3RoID0gcGF0dGVybi5sZW5ndGg7XG4gICAgICBlbGVtZW50Lm1heExlbmd0aCA9IChkeW5hbWljUGF0dGVybiA9PSBudWxsID8gdm9pZCAwIDogZHluYW1pY1BhdHRlcm4ubGVuZ3RoKSB8fCBwYXR0ZXJuLmxlbmd0aDtcbiAgICAgIGVsZW1lbnQucGF0dGVybiA9IGAueyR7cGF0dGVybi5sZW5ndGh9LCR7KGR5bmFtaWNQYXR0ZXJuID09IG51bGwgPyB2b2lkIDAgOiBkeW5hbWljUGF0dGVybi5sZW5ndGgpIHx8IHBhdHRlcm4ubGVuZ3RofX1gO1xuICAgICAgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIGVsZW1lbnQudmFsdWUgPSBtYXNrKGVsZW1lbnQudmFsdWUsIHBhdHRlcm5zKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGVsZW1lbnQudmFsdWUgJiYgbGlzdGVuZXIoKTtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgbGlzdGVuZXIpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGxpc3RlbmVyKTtcbiAgfTtcbn07XG5jb25zdCBwcmVwYXJlTWFza0lucHV0cyA9ICgpID0+IHtcbiAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLW1hc2tdXCIpO1xuICBpbnB1dHMuZm9yRWFjaCgoZWwpID0+IGlucHV0KGVsLCBkYXRhc2V0VG9PYmplY3QoZWwuZGF0YXNldC5tYXNrKSkpO1xufTtcbmNvbnN0IGRhdGFzZXRUb09iamVjdCA9ICh2YWx1ZSkgPT4gSlNPTi5wYXJzZSh2YWx1ZS5yZXBsYWNlKC8nL2csICdcIicpKTtcbmV4cG9ydCB7IGN1cnJlbmN5Rm9ybWF0LCBjdXJyZW5jeVVuZm9ybWF0LCBkYXRlLCBkYXRlVGltZUZvcm1hdCwgZ2V0Q29tcHV0ZWREYXRlLCBnZXREYXRlUGF0dGVybiwgaW5wdXQsIGlucHV0Q3VycmVuY3ksIGlucHV0RGF0ZSwgaW5wdXROdW1iZXIsIGlzVmFsaWREYXRlLCBsb2NhbGVEYXRlLCBsb2NhbGVEYXRlVGltZSwgbG9jYWxlVGltZSwgbWFzaywgbnVtYmVyRm9ybWF0LCBudW1iZXJVbmZvcm1hdCwgcHJlcGFyZU1hc2tJbnB1dHMsIHVubWFzaywgdW5tYXNrRGF0ZSwgdW5tYXNrTnVtYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==